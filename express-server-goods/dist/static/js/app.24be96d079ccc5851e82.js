webpackJsonp([1],{"2b3a":function(t,e){},"7Otq":function(t,e,i){t.exports=i.p+"static/img/logo.731b815.png"},BGQE:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("/5sW"),a=i("gRE1"),n=i.n(a),o=i("fZjL"),r=i.n(o),c=i("woOf"),d=i.n(c);function u(t){switch(t){case"id":return"商品ID";case"name":return"商品名称";case"price":return"商品价格";case"stock":return"商品库存";case"goods_code":return"商品条码";case"status":return"商品状态";case"create_time":return"创建时间";case"update_time":return"更新时间"}}var l={name:"Form",data:function(){return{title:"",originData:{},warningMsg:"",proData:{},verification:{},canSave:!1}},props:{msg:{type:Object,default:{}}},methods:{init:function(){var t=this;this.originData=d()({},this.msg.data),r()(this.msg.data).forEach(function(e){return t.verification[e]=0}),this.title="edit"==this.msg.mode?"编辑商品信息":"添加商品信息"},getKey:function(t){return u(t)},check:function(){var t=n()(this.verification).reduce(function(t,e){return t+e});"edit"==this.msg.mode?this.canSave=t>=1:this.canSave=5==t;var e={};e=this.canSave?{canSave:!0,mode:this.msg.mode,data:d()({},this.msg.data)}:{canSave:!1,mode:this.msg.mode,data:{}},this.$emit("canSave",e)},inputValidate:function(t,e,i,s){var a;a=i,s.reg.test(a)?(this.verification[e]=1,this.warningMsg="",t.style.borderColor="#ccc",this.check()):(this.warningMsg=s.wMsg,this.verification[e]=0,t.style.borderColor="#f3bfa9")},changeInput:function(t){var e=t.target.value,i=t.target.dataset.key;e!=this.originData[i]?this.inputValidate(t.target,i,e,function(t){var e={};return"name"==t?(e.reg=/^[\u4E00-\u9FA5A-Za-z0-9_.]+$/,e.wMsg="*商品名称必填，并不能含有非法字符哦！"):"price"==t?(e.reg=/((^[1-9]\d*)|^0)(\.\d{0,2}){0,1}$/,e.wMsg="*请填写正确格式的商品价格哦！"):"stock"==t?(e.reg=/^\d+$/,e.wMsg="*商品库存只能是整数哦！"):"goods_code"==t?(e.reg=/^\d+$/,e.wMsg="*商品条形码只能是整数哦！"):"status"==t&&(e.reg=/^[01]{1}$/,e.wMsg="*商品状态只能为0或者1；1表示正常，0表示下架！"),e}(i)):"edit"==this.msg.mode&&(this.verification[i]=0,this.check())}},computed:{editFlag:function(){return this.$store.state.editFlag}},watch:{warningMsg:function(t){var e=this;if(""!=t)var i=setTimeout(function(){e.warningMsg="",clearTimeout(i),i=null},2e3)},editFlag:function(){console.log("编辑框发生变化了"),this.editFlag&&(this.canSave=!1,this.$emit("canSave",{canSave:!1,data:{}}))},msg:function(){this.init()}}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"forms"},[i("div",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),i("p",[i("span",{staticClass:"warning"},[t._v(t._s(t.warningMsg))])]),t._v(" "),i("ul",t._l(t.msg.data,function(e,s){return i("li",[i("span",[t._v(t._s(t.getKey(s)))]),t._v(" "),["id","create_time","update_time"].includes(s)?i("div",[t._v(t._s(e))]):i("input",{directives:[{name:"model",rawName:"v-model",value:t.msg.data[s],expression:"msg.data[k]"}],staticClass:"myInput",attrs:{"data-key":s,type:"text"},domProps:{value:t.msg.data[s]},on:{blur:t.changeInput,input:function(e){e.target.composing||t.$set(t.msg.data,s,e.target.value)}}})])}),0)])},staticRenderFns:[]};var f=i("VU/8")(l,h,!1,function(t){i("Zy0b")},"data-v-4a6e8a86",null).exports,m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"myConfirm"},[t._m(0),t._v(" "),i("p",{staticClass:"msg"},[t._t("default")],2),t._v(" "),i("div",{staticClass:"btns"},[i("div",{staticClass:"btnBigger",on:{click:function(e){return t.result(1)}}},[t._v("确定")]),t._v(" "),i("div",{staticClass:"btnBigger",on:{click:function(e){return t.result(0)}}},[t._v("取消")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i",{staticClass:"iconfont icon-tanhao"}),this._v(" "),e("span",[this._v("提示")])])}]};var v=i("VU/8")({name:"MyConfirm",methods:{result:function(t){this.$emit("myClick",t)}}},m,!1,function(t){i("r+bj")},"data-v-6cab980a",null).exports,g={name:"EditBar",data:function(){return{canSave:!1,showConfirm:!1,proData:{},mode:""}},methods:{close:function(){this.canSave?this.showConfirm=!0:this.$store.commit("setEditFlag",!1)},save:function(){if(this.canSave){console.log("保存"),console.log(this.proData);var t={goodsName:this.proData.name,price:100*this.proData.price,stock:this.proData.stock,status:this.proData.status,goodsCode:this.proData.goods_code};this.submitForm(t)}},submitForm:function(t){var e=this,i={};i="edit"==this.mode?{method:"PUT",url:"/goods/"+this.proData.id,data:t}:{method:"POST",url:"/goods",data:t},this.axios(i).then(function(t){console.log(t),2e3==t.data.code&&e.$store.commit("setEditFlag",!1)})},getMsg:function(t){console.log("得到数据了"),this.canSave=t.canSave,this.proData=t.data,this.mode=t.mode},doConfClick:function(t){t&&this.$store.commit("setEditFlag",!1),this.showConfirm=!1}},computed:{currentData:function(){return this.$store.state.currentData}},components:{Forms:f,MyConfirm:v}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"edit-bar"},[i("div",{staticClass:"editContainer"},[i("i",{staticClass:"iconfont icon-close",on:{click:function(e){return t.close()}}}),t._v(" "),i("forms",{attrs:{msg:t.currentData},on:{canSave:t.getMsg}}),t._v(" "),i("div",{staticClass:"btn btnBigger",class:t.canSave?"":"disabled",on:{click:function(e){return t.save()}}},[t._v("保存")])],1),t._v(" "),i("my-confirm",{directives:[{name:"show",rawName:"v-show",value:t.showConfirm,expression:"showConfirm"}],on:{myClick:t.doConfClick}},[t._v("还没有保存，确定关闭吗？")])],1)},staticRenderFns:[]};var _={name:"App",computed:{editFlag:function(){return this.$store.state.editFlag}},components:{EditBar:i("VU/8")(g,p,!1,function(t){i("ryB7")},"data-v-40f9cfc0",null).exports}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this._m(0),this._v(" "),e("section",{staticClass:"appSection"},[this._m(1),this._v(" "),e("article",[e("router-view")],1)]),this._v(" "),e("edit-bar",{directives:[{name:"show",rawName:"v-show",value:this.editFlag,expression:"editFlag"}]})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"header"},[e("img",{attrs:{src:i("7Otq")}}),this._v(" "),e("h2",[this._v("Liane's DEMO")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("aside",[e("ul",[e("li",{staticClass:"active"},[this._v("商品管理")])])])}]};var w=i("VU/8")(_,C,!1,function(t){i("2b3a")},"data-v-40169a49",null).exports,b=i("/ocq"),D={name:"Tables",props:{list:{Type:Array,default:function(){return[]}}},methods:{edit:function(t){this.$emit("edit",t),this.$store.commit("setEditFlag",!0)},deleteProduct:function(t){this.$emit("deleteProduct",t)},getKey:function(t){return u(t)}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"tables"},[i("ul",{staticClass:"ulTable"},[i("li",[i("ul",{staticClass:"ulCell"},[t._l(t.list[0],function(e,s){return i("li",[t._v(t._s(t.getKey(s)))])}),t._v(" "),i("li",[t._v("操作")])],2)]),t._v(" "),t._l(t.list,function(e){return i("li",[i("ul",{staticClass:"ulCell"},[t._l(e,function(e,s){return i("li",[t._v(t._s(e))])}),t._v(" "),i("li",[i("span",{staticClass:"btnSmaller",on:{click:function(i){return t.edit(e.id)}}},[t._v("编辑")]),t._v(" "),i("span",{staticClass:"btnSmaller",on:{click:function(i){return t.deleteProduct(e.id)}}},[t._v("删除")])])],2)])})],2)])},staticRenderFns:[]};var F={name:"Product",data:function(){return{productList:[],showList:[],showConfirm:!1,deleteId:null,searchId:null,warningMsg:""}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.axios({method:"get",url:"/goods"}).then(function(e){t.refreshData(e.data.data.list)})},dataFilter:function(t){var e=["id","name","price","stock","goods_code","status"];return t.forEach(function(i,s){t[s]=function(t,e){var i={};return r()(t).filter(function(t){return e.includes(t)}).forEach(function(e){i[e]=t[e]}),i}(i,e)}),t},edit:function(t){var e={mode:"edit",data:d()({},this.productList[t])};console.log(e),this.$store.commit("setCurrentData",e)},add:function(){this.$store.commit("setEditFlag",!0),this.$store.commit("setCurrentData",{mode:"add",data:{name:"",price:"",stock:"",goods_code:"",status:""}})},search:function(){var t=this;console.log(this.searchId),this.searchId||(this.warningMsg="*查询ID不能为空哦！"),this.searchId&&this.axios({method:"GET",url:"/goods/byId/"+this.searchId}).then(function(e){t.searchId=null,t.refreshData(e.data.data)})},refreshData:function(t){this.productList=function(t,e){for(var i={},s=0;s<t.length;s++)t[s].price=(t[s].price/100).toFixed(2),delete t[s].expand,i[t[s][e]]=t[s];return i}(t,"id"),this.showList=this.dataFilter(t)},inputChange:function(){/^\d+$/.test(this.searchId)||(this.searchId=this.searchId.slice(0,this.searchId.length-1),this.warningMsg="*ID必须是数字哦")},setShowConfirm:function(t){this.showConfirm=!0,this.deleteId=t},doDelete:function(t){var e=this;t&&this.axios({method:"DELETE",ContentType:"\tapplication/x-www-form-urlencoded",url:"/goods/"+this.deleteId}).then(function(t){e.getData()}),this.showConfirm=!1}},computed:{editFlag:function(){return this.$store.state.editFlag}},watch:{warningMsg:function(t){var e=this;if(""!=t)var i=setTimeout(function(){e.warningMsg="",clearTimeout(i),i=null},2e3)},editFlag:function(){this.getData()}},components:{Tables:i("VU/8")(D,y,!1,function(t){i("wisX")},"data-v-636b88f0",null).exports,MyConfirm:v}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"product"},[i("div",{staticClass:"setting"},[i("div",{staticClass:"btnBigger",on:{click:function(e){return t.getData()}}},[i("i",{staticClass:"iconfont icon-aixin1"}),t._v(" 刷新\n    ")]),t._v(" "),i("div",{staticClass:"btnBigger",on:{click:function(e){return t.add()}}},[i("i",{staticClass:"iconfont icon-add"}),t._v(" 添加\n    ")]),t._v(" "),i("div",{staticClass:"search"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchId,expression:"searchId"}],staticClass:"myInput",attrs:{placeholder:"请输入商品ID",type:"text"},domProps:{value:t.searchId},on:{input:[function(e){e.target.composing||(t.searchId=e.target.value)},t.inputChange]}}),t._v(" "),i("div",{staticClass:"btnBigger",on:{click:t.search}},[i("i",{staticClass:"iconfont icon-search"}),t._v("ID查询\n      ")]),t._v(" "),i("span",{staticClass:"warning"},[t._v(t._s(t.warningMsg))])])]),t._v(" "),t.showList.length>0?i("tables",{attrs:{list:t.showList},on:{edit:t.edit,deleteProduct:t.setShowConfirm}}):i("div",{staticClass:"no-data"},[i("i",{staticClass:"iconfont icon-kong"}),t._v(" "),i("p",[t._v("没有商品数据！")])]),t._v(" "),i("my-confirm",{directives:[{name:"show",rawName:"v-show",value:t.showConfirm,expression:"showConfirm"}],on:{myClick:t.doDelete}},[t._v("删除后不能不能恢复，确定删除吗？")])],1)},staticRenderFns:[]};var E=i("VU/8")(F,$,!1,function(t){i("bzNr")},"data-v-ead12c0e",null).exports;s.a.use(b.a);var k=new b.a({routes:[{path:"/",name:"Product",component:E}]}),I=i("mtWM"),M=i.n(I),x=i("NYxO");i("BGQE"),i("NrZ4");s.a.config.productionTip=!1,s.a.prototype.axios=M.a.create({baseURL:"http://gaoyue.tpddns.cn:10911"}),s.a.use(x.a);var S=new x.a.Store({state:{editFlag:!1,currentData:{mode:"add",data:{}}},mutations:{setEditFlag:function(t,e){t.editFlag=e},setCurrentData:function(t,e){t.currentData=e}}});new s.a({el:"#app",router:k,store:S,render:function(t){return t(w)}})},NrZ4:function(t,e){},Zy0b:function(t,e){},bzNr:function(t,e){},"r+bj":function(t,e){},ryB7:function(t,e){},wisX:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.24be96d079ccc5851e82.js.map